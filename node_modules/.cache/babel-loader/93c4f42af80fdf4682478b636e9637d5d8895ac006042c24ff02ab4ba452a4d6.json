{"ast":null,"code":"var _jsxFileName = \"/Users/viktoriakvasova/Desktop/vitrina-app/src/components/Shop.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport Cart from './Cart';\nimport BasketList from './BasketList';\nimport Alert from './Alert';\nimport { API_URL, API_KEY, VB_TO_RUB } from '../config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Shop() {\n  _s();\n  const [goods, setGoods] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [order, setOrder] = useState([]);\n  const [isBasketShow, setBasketShow] = useState(false);\n  const [alertName, setAlertName] = useState('');\n  useEffect(() => {\n    fetch(API_URL, {\n      headers: {\n        Authorization: API_KEY\n      }\n    }).then(res => res.json()).then(data => {\n      if (data.shop) {\n        setGoods(data.shop);\n      }\n      setLoading(false);\n    }).catch(err => {\n      console.error('Ошибка при загрузке товаров:', err);\n      setLoading(false);\n    });\n  }, []);\n  const addToBasket = item => {\n    const itemIndex = order.findIndex(el => el.mainId === item.mainId);\n    if (itemIndex < 0) {\n      const newItem = {\n        ...item,\n        quantity: 1\n      };\n      setOrder([...order, newItem]);\n    } else {\n      const newOrder = order.map((el, index) => {\n        if (index === itemIndex) {\n          return {\n            ...el,\n            quantity: el.quantity + 1\n          };\n        } else {\n          return el;\n        }\n      });\n      setOrder(newOrder);\n    }\n    setAlertName(item.displayName); // показать уведомление\n  };\n  const removeFromBasket = itemId => {\n    setOrder(order.filter(item => item.mainId !== itemId));\n  };\n  const incQuantity = itemId => {\n    const newOrder = order.map(el => {\n      if (el.mainId === itemId) {\n        return {\n          ...el,\n          quantity: el.quantity + 1\n        };\n      }\n      return el;\n    });\n    setOrder(newOrder);\n  };\n  const decQuantity = itemId => {\n    const newOrder = order.map(el => {\n      if (el.mainId === itemId) {\n        return {\n          ...el,\n          quantity: el.quantity > 1 ? el.quantity - 1 : 1\n        };\n      }\n      return el;\n    });\n    setOrder(newOrder);\n  };\n  const closeAlert = () => {\n    setAlertName('');\n  };\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"container my-4 position-relative\",\n    children: [/*#__PURE__*/_jsxDEV(Cart, {\n      quantity: order.reduce((acc, item) => acc + item.quantity, 0),\n      handleBasketShow: () => setBasketShow(!isBasketShow)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this), isBasketShow && /*#__PURE__*/_jsxDEV(BasketList, {\n      order: order,\n      handleBasketShow: () => setBasketShow(false),\n      removeFromBasket: removeFromBasket,\n      incQuantity: incQuantity,\n      decQuantity: decQuantity\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), alertName && /*#__PURE__*/_jsxDEV(Alert, {\n      name: alertName,\n      closeAlert: closeAlert\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u041C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"h5\", {\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: goods.length > 0 ? goods.map(item => {\n        var _item$displayAssets$;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-4 mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card h-100\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: (_item$displayAssets$ = item.displayAssets[0]) === null || _item$displayAssets$ === void 0 ? void 0 : _item$displayAssets$.url,\n              className: \"card-img-top\",\n              alt: item.displayName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"card-title\",\n                children: item.displayName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-text\",\n                children: [\"\\u0426\\u0435\\u043D\\u0430: \", (item.price.finalPrice * VB_TO_RUB).toFixed(0), \" \\u20BD\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn custom-buy-button\",\n                back: true,\n                onClick: () => addToBasket(item),\n                children: \"\\u041A\\u0443\\u043F\\u0438\\u0442\\u044C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 21\n          }, this)\n        }, item.mainId, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }, this);\n      }) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u041D\\u0435\\u0442 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0445 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 9\n  }, this);\n}\n_s(Shop, \"IrnwOrdkhjeNAjHcIX5TpsJOkA4=\");\n_c = Shop;\nexport default Shop;\nvar _c;\n$RefreshReg$(_c, \"Shop\");","map":{"version":3,"names":["useEffect","useState","Cart","BasketList","Alert","API_URL","API_KEY","VB_TO_RUB","jsxDEV","_jsxDEV","Shop","_s","goods","setGoods","loading","setLoading","order","setOrder","isBasketShow","setBasketShow","alertName","setAlertName","fetch","headers","Authorization","then","res","json","data","shop","catch","err","console","error","addToBasket","item","itemIndex","findIndex","el","mainId","newItem","quantity","newOrder","map","index","displayName","removeFromBasket","itemId","filter","incQuantity","decQuantity","closeAlert","className","children","reduce","acc","handleBasketShow","fileName","_jsxFileName","lineNumber","columnNumber","name","length","_item$displayAssets$","src","displayAssets","url","alt","price","finalPrice","toFixed","back","onClick","_c","$RefreshReg$"],"sources":["/Users/viktoriakvasova/Desktop/vitrina-app/src/components/Shop.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport Cart from './Cart';\nimport BasketList from './BasketList';\nimport Alert from './Alert';\nimport { API_URL, API_KEY, VB_TO_RUB } from '../config';\n\n\n\nfunction Shop() {\n    const [goods, setGoods] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [order, setOrder] = useState([]);\n    const [isBasketShow, setBasketShow] = useState(false);\n    const [alertName, setAlertName] = useState('');\n\n    useEffect(() => {\n        fetch(API_URL, {\n        headers: {\n            Authorization: API_KEY,\n        },\n        })\n        .then((res) => res.json())\n        .then((data) => {\n            if (data.shop) {\n            setGoods(data.shop);\n            }\n            setLoading(false);\n        })\n        .catch((err) => {\n            console.error('Ошибка при загрузке товаров:', err);\n            setLoading(false);\n        });\n    }, []);\n\n    const addToBasket = (item) => {\n        const itemIndex = order.findIndex((el) => el.mainId === item.mainId);\n\n        if (itemIndex < 0) {\n        const newItem = {\n            ...item,\n            quantity: 1,\n        };\n        setOrder([...order, newItem]);\n        } else {\n        const newOrder = order.map((el, index) => {\n            if (index === itemIndex) {\n            return {\n                ...el,\n                quantity: el.quantity + 1,\n            };\n            } else {\n            return el;\n            }\n        });\n        setOrder(newOrder);\n        }\n\n        setAlertName(item.displayName); // показать уведомление\n    };\n\n    const removeFromBasket = (itemId) => {\n        setOrder(order.filter((item) => item.mainId !== itemId));\n    };\n\n    const incQuantity = (itemId) => {\n        const newOrder = order.map((el) => {\n        if (el.mainId === itemId) {\n            return { ...el, quantity: el.quantity + 1 };\n        }\n        return el;\n        });\n        setOrder(newOrder);\n    };\n\n    const decQuantity = (itemId) => {\n        const newOrder = order.map((el) => {\n        if (el.mainId === itemId) {\n            return { ...el, quantity: el.quantity > 1 ? el.quantity - 1 : 1 };\n        }\n        return el;\n        });\n        setOrder(newOrder);\n    };\n\n    const closeAlert = () => {\n        setAlertName('');\n    };\n\n    return (\n        <main className=\"container my-4 position-relative\">\n        <Cart\n            quantity={order.reduce((acc, item) => acc + item.quantity, 0)}\n            handleBasketShow={() => setBasketShow(!isBasketShow)}\n        />\n\n        {isBasketShow && (\n            <BasketList\n            order={order}\n            handleBasketShow={() => setBasketShow(false)}\n            removeFromBasket={removeFromBasket}\n            incQuantity={incQuantity}\n            decQuantity={decQuantity}\n            />\n        )}\n\n        {alertName && <Alert name={alertName} closeAlert={closeAlert} />}\n\n        <h2>Магазин </h2>\n        {loading ? (\n            <h5>Загрузка товаров...</h5>\n        ) : (\n            <div className=\"row\">\n            {goods.length > 0 ? (\n                goods.map((item) => (\n                <div className=\"col-md-4 mb-4\" key={item.mainId}>\n                    <div className=\"card h-100\">\n                    <img\n                        src={item.displayAssets[0]?.url}\n                        className=\"card-img-top\"\n                        alt={item.displayName}\n                    />\n                    <div className=\"card-body\">\n                        <h5 className=\"card-title\">{item.displayName}</h5>\n                        <p className=\"card-text\">\n                        Цена: {(item.price.finalPrice * VB_TO_RUB).toFixed(0)} ₽\n                        </p>\n                        <button\n                        className=\"btn custom-buy-button\" back\n                        onClick={() => addToBasket(item)}\n                        >\n                        Купить\n                        </button>\n                    </div>\n                    </div>\n                </div>\n                ))\n            ) : (\n                <p>Нет доступных товаров</p>\n            )}\n            </div>\n        )}\n        </main>\n    );\n}\n\nexport default Shop;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}